{
    "version": 1.0,
    "build": {
        "productVersion": "3.3.1",
        "itemsToBuild": [
            {
                "item": "vendor/CMakeLists.txt"
            }
        ],
        "tests": [
        ],
        "imports" : [
        ],
        "exports": [
            {
                "item": "R",
                "target": "target/R",
                "to": "MROComponents"
            }
        ],
        "sources": [
            {
                "item": "https://msdata.pkgs.visualstudio.com/DefaultCollection/_apis/packaging/MRS_Components_MRO/nuget/index.json",
                "type": "nuget",
                "for": [
                    "MROComponents"
                ],
                "properties": {
                    "username": "PackagePublishToken",
                    "password": "jnv3kihurkmxad33itbzgkeq6bocqtodhmpuq4pcpnnuki3vmwoq",
                    "apiKey": "PrivatePreview"
                }
            }
        ]
    },
    "ci": {
        "alias": {
            "windows": [
                "windows"
            ],
            "linux": [
                "centos7 && large"
            ],
            "mac": [
                "OSX"
            ]
        },
        "gates": {
            "checkin": [
                "build"
            ],
            "rolling": [
                "build",
                "upload"
            ]
        },
        "workflow": {
            "build": {
                "nodes": {
                    "windows": [{
                        "cmd": "powerShell.exe -ExecutionPolicy Bypass -file build.ps1",
                        "archiveList": [
                            "target/**/*"
                        ],
                        "containerList": [
                        ],
                        "stashList": { "windows.results": "target/**/*" },
                        "recycle": true
                    }],
                    "linux": [{
                        "cmd": "bash -c \"source /etc/profile && ./build.sh\"",
                        "archiveList": [
                            "target/**/*"
                        ],
                        "containerList": [
                            "mrsdocker.cloudapp.net:5000/mrov2:0.7"
                        ],
                        "stashList": { "linux.results": "target/**/*" },
                        "recycle": true 
                    }],
                    "mac": [{
                        "cmd": "./build.sh",
                        "archiveList": [
                            "target/**/*"
                        ],
                        "containerList": [
                        ],
                        "stashList": { "osx.results": "target/**/*" },
                        "recycle": false 
                    }]
                }
            },
            "upload": {
                "nodes": {
                    "windows": [{
                        "cmd": "powerShell.exe -ExecutionPolicy Bypass -file build.ps1 -Target Export",
                        "restoreList": [ "windows.results", "linux.results", "osx.results" ],
                        "recycle": true
                        
                    }]
                }
            }
        }
    }
}
